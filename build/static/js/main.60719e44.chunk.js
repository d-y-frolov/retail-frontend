(this.webpackJsonpretail=this.webpackJsonpretail||[]).push([[0],{100:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),i=(a(97),a(98),a(47)),s=a(15),u=a(169),d="/cash",l="/backoffice",p="/reports",b=[{path:d,label:"POS"},{path:l,label:"BackOffice"},{path:p,label:"Reports"},{path:"/",label:"About"}],j=(a(99),a(100),a(2)),h=function(){return Object(j.jsx)("nav",{children:b.map((function(e,t){return Object(j.jsx)(u.a,{component:i.b,exact:!0,to:e.path,style:{margin:20},children:e.label},t)}))})},f=a(19),O=a(170),x=a(167),v=a(13),m=a(8),g=a.n(m),y=a(17),w="https://retail-back-end.herokuapp.com/",k="product",_="check",C="cash-register",N=a(18),I=a.n(N),E="[backoffice]-get-products",D="[backoffice]-add-product",S="[backoffice]-update-product",P="[backoffice]-remove-product",B="[backoffice]-get-cashes",F="[backoffice]-get-groups",T="[backoffice]-get-units",R="[backoffice]-get-checks";function A(e,t){return t?parseInt(e):parseFloat(e)}function U(e,t){return t?parseInt(e).toFixed(0):parseFloat(e).toFixed(3)}function q(e){return(Math.round(100*e)/100).toLocaleString("iw-en",{style:"currency",currency:"ILS"})}a(125);var M=a(46),G=a.n(M),L={id:"",name:"",groupId:"",groupName:"",unitId:"",unitName:"",tax:0,price:0,remainder:0,manufacturer:"",country:"",pieceUnit:!0};var W=a(80),H=a(28),Y=a.n(H),Q=function(e){var t=e.datasource,a=e.needBtn,n=e.onBtnClickCallback,r=e.columns;function c(e){var t=e;switch(typeof e){case"boolean":Object(W.a)("formattedValue"),t=!0===e?"YES":"no"}return t}return 0!==t.length||r?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:Y.a.header,children:function(){var e=[];if(r)for(var n=0;n<r.length;n++)e.push(Object(j.jsx)("div",{style:{width:"".concat(r[n].width,"px")},className:Y.a.headerItem,children:r[n].headerName},n));else{var c=t[0];for(var o in c)e.push(Object(j.jsx)("div",{style:{width:"".concat(100/Object.keys(c).length,"%")},className:Y.a.headerItem,children:o},o))}return e.push(Object(j.jsx)("div",{style:{width:"".concat(20+(a?40:0),"px")},className:Y.a.headerBtn,children:"\xa0"},e.length)),e}()}),Object(j.jsx)("div",{className:Y.a.wrapper,children:Object(j.jsx)("div",{className:Y.a.body,children:t.map((function(e,t){return Object(j.jsx)("div",{className:Y.a.bodyLine,children:function(){var o=[];if(r)for(var i=0;i<r.length;i++)o.push(Object(j.jsx)("div",{style:{width:"".concat(r[i].width,"px"),textAlign:"".concat("number"===r[i].type?"right":"left")},className:Y.a.bodyItem,children:c(e[r[i].field])},i));else for(var s in e)o.push(Object(j.jsx)("div",{style:{width:"".concat(100/Object.keys(e).length,"%")},className:Y.a.bodyItem,children:"boolean"===typeof e[s]?!0===e[s]?"YES":"no":e[s]},s));return a&&o.push(Object(j.jsx)("button",{style:{width:"".concat(40,"px")},className:Y.a.bodyBtn,onClick:function(){n(e,t)},children:"..."},o.length)),o}()},t)}))})})]}):Object(j.jsx)(j.Fragment,{children:"empty datasource"})},V=a(56),J=a(5),K=a(168),Z=a(172),X=a(171),z=a(166),$=a(51),ee=a.n($);function te(e){var t=e.detail,a=e.index,r=e.closeHandler,c=Object(n.useState)(Object(J.a)({},t)),o=Object(f.a)(c,2),i=o[0],s=o[1];console.log("InProductDetail:",t,a);var u=Object(v.c)((function(e){return e.backoffice.groups})),d=Object(v.c)((function(e){return e.backoffice.units})),l=-1===a,p=function(e){var t=e.target;return s(Object(J.a)(Object(J.a)({},i),{},Object(V.a)({},t.id,"checkbox"===t.type?t.checked:t.value)))};return Object(j.jsx)("div",{className:ee.a.modalBackground,children:Object(j.jsxs)("div",{className:ee.a.modal,children:[Object(j.jsx)("div",{className:ee.a.headerWrapper,children:Object(j.jsx)(O.a,{type:"text",required:!0,label:"Barcode",variant:"outlined",id:"id",value:i.id,onChange:p,disabled:!l})}),Object(j.jsxs)("div",{className:ee.a.inputWrapper,children:[Object(j.jsx)(O.a,{type:"text",required:!0,label:"Name",variant:"outlined",id:"name",value:i.name,onChange:p}),Object(j.jsxs)(z.a,{required:!0,children:[Object(j.jsx)(X.a,{id:"group-select-label",children:"Group"}),Object(j.jsxs)(K.a,{labelId:"group-select-label",id:"group-select",value:i.groupId,onChange:function(e){var t=e.target;s(Object(J.a)(Object(J.a)({},i),{},{groupId:t.value,groupName:u.find((function(e){return e.id===t.value})).name}))},children:["   ",u.map((function(e,t){return Object(j.jsx)(Z.a,{value:e.id,children:e.name},t)}))]})]}),Object(j.jsx)(O.a,{type:"number",required:!0,label:"Price",variant:"outlined",id:"price",value:i.price,onChange:p}),Object(j.jsx)(O.a,{type:"number",required:!0,label:"Tax(%)",variant:"outlined",id:"tax",value:i.tax,onChange:p}),Object(j.jsx)(O.a,{type:"number",required:!0,label:"Remainder",variant:"outlined",id:"remainder",value:i.remainder,onChange:p}),Object(j.jsxs)(z.a,{required:!0,children:[Object(j.jsx)(X.a,{id:"unit-select-label",children:"Unit"}),Object(j.jsxs)(K.a,{labelId:"unit-select-label",id:"unit-select",value:i.unitId,onChange:function(e){var t=e.target,a=d.find((function(e){return e.id===t.value}));s(Object(J.a)(Object(J.a)({},i),{},{unitId:t.value,unitName:a.name,pieceUnit:a.pieceUnit}))},children:["   ",d.map((function(e,t){return Object(j.jsx)(Z.a,{value:e.id,children:e.name},t)}))]})]}),Object(j.jsx)(O.a,{type:"text",label:"Manufacturer",variant:"outlined",id:"manufacturer",value:i.manufacturer,onChange:p}),Object(j.jsx)(O.a,{type:"text",label:"Country",variant:"outlined",id:"country",value:i.country,onChange:p})]}),Object(j.jsxs)("div",{className:"buttonWrapper",children:[Object(j.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){r(i,l?-1:a)},disableElevation:!0,children:l?"Add":"Ok"}),Object(j.jsx)(x.a,{variant:"contained",color:"default",onClick:function(){r({})},disableElevation:!0,children:l?"Close":"Cancel"}),l?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)(x.a,{variant:"contained",color:"secondary",onClick:function(){r(i,-2)},disableElevation:!0,children:"Delete"})]})]})})}var ae=function(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),o=Object(f.a)(c,2),i=(o[0],o[1],Object(n.useState)({show:!1})),s=Object(f.a)(i,2),u=s[0],d=s[1],l=Object(v.b)(),p=(Object(v.c)((function(e){return e.backoffice.cashes})),Object(v.c)((function(e){return e.backoffice.groups}))),b=Object(v.c)((function(e){return e.backoffice.units})),h=Object(v.c)((function(e){return e.backoffice.products}));Object(v.c)((function(e){return e.backoffice.checks}));Object(n.useEffect)((function(){l(function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(w,"/").concat(C)).then((function(e){return e.data}));case 3:a=e.sent,t({type:B,payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),l(function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(w,"/").concat("group")).then((function(e){return e.data}));case 3:a=e.sent,t({type:F,payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),l(function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(w,"/").concat("unit")).then((function(e){return e.data}));case 3:a=e.sent,t({type:T,payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var m=function(e,t){d({show:!0,product:e,index:t})};return Object(j.jsxs)(j.Fragment,{children:[u.show?Object(j.jsx)(te,{detail:u.product,index:u.index,closeHandler:function(e,t){return-1===t?(console.log("After ProductDetail ADD_PRODUCT: ",e,t),void l((a=e,function(){var e=Object(y.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:a.id,name:a.name,groupId:a.groupId,unitId:a.unitId,price:a.price,remainder:a.remainder,tax:a.tax,manufacturer:a.manufacturer,country:a.country},e.prev=1,e.next=4,I.a.post("".concat(w,"/").concat(k),n).then((function(e){return e.data}));case 4:r=e.sent,console.log(r),t({type:D,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))):(d({show:!1}),-2===t?(console.log("After ProductDetail REMOVE_PRODUCT: ",e,t),void l((n=e.id,function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.delete("".concat(w,"/").concat(k,"/").concat(n)).then((function(e){return e.data}));case 3:a=e.sent,console.log(a),console.log("ACTIONS_REMOVE_PRODUCT:ID="+n),t({type:P,payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))):e.id?(console.log("After ProductDetail UPDATE_PRODUCT: ",e,t),void l((r=e,function(){var e=Object(y.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:r.id,name:r.name,groupId:r.groupId,unitId:r.unitId,price:r.price,remainder:r.remainder,tax:r.tax,manufacturer:r.manufacturer,country:r.country},e.prev=1,e.next=4,I.a.put("".concat(w,"/").concat(k),a).then((function(e){return e.data}));case 4:n=e.sent,console.log(n),t({type:S,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))):void console.log("After ProductDetail CANCEL: ",e,t));var a,n,r}}):Object(j.jsx)(j.Fragment,{}),Object(j.jsxs)("div",{className:G.a.wrapBackoffice,children:[Object(j.jsxs)("div",{className:G.a.wrapProducts,children:[Object(j.jsx)("span",{children:"products"}),Object(j.jsxs)("div",{className:G.a.wrapProductsControl,children:[Object(j.jsx)(O.a,{required:!0,id:"outlined-required",label:"Part of barcode or name",variant:"outlined",onChange:function(e){return r(e.target.value)},value:a}),Object(j.jsx)(x.a,{variant:"contained",id:"find-products",color:"primary",onClick:function(){return l((e=a,function(){var t=Object(y.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.a.get("".concat(w,"/").concat(k,"?search=").concat(e)).then((function(e){return e.data}));case 3:n=t.sent,a({type:E,payload:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()));var e},children:"Find"}),Object(j.jsx)(x.a,{variant:"contained",id:"add-product",color:"primary",onClick:function(){m(L,-1)},children:"Add"})]}),Object(j.jsx)(Q,{datasource:h,columns:[{field:"id",headerName:"Code",width:120},{field:"name",headerName:"Name",width:120},{field:"groupId",headerName:"Group",width:50},{field:"price",headerName:"Price",width:80,type:"number"},{field:"remainder",headerName:"Remainder",width:70,type:"number"},{field:"unitId",headerName:"Unit",width:50},{field:"tax",headerName:"Tax %",width:30,type:"number"},{field:"country",headerName:"Country",width:70},{field:"manufacturer",headerName:"Manufact",width:70}],needBtn:!0,onBtnClickCallback:m})]}),Object(j.jsxs)("div",{className:G.a.wrapGroups,children:[Object(j.jsx)("span",{children:"product groups"}),Object(j.jsx)(Q,{datasource:p,needBtn:!1})]}),Object(j.jsxs)("div",{className:G.a.wrapUnits,children:[Object(j.jsx)("span",{children:"units"}),Object(j.jsx)(Q,{datasource:b,needBtn:!1})]})]})]})},ne=a(20),re=a.n(ne),ce="[cash]-set-products",oe="[cash]-set-info",ie="[cash]-save-check",se="[cash]-add-detail",ue="[cash]-del-detail",de="[cash]-update-detail",le="[cash]-clear-details";a(126),a(127);var pe=function(e){var t=e.detail,a=e.index,r=e.closeHandler;console.log("PROPS",t,a,r);var c=Object(n.useState)(U(t.quantity,t.pieceUnit)),o=Object(f.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)(t.price.toFixed(2)),d=Object(f.a)(u,2),l=d[0],p=d[1];return Object(j.jsx)("div",{className:"modalBackground",children:Object(j.jsxs)("div",{className:"modal",children:[Object(j.jsxs)("div",{className:"headerWrapper",children:[Object(j.jsx)("span",{children:t.id}),Object(j.jsx)("span",{children:t.name})]}),Object(j.jsx)(O.a,{type:"number",required:!0,label:"Quantity",variant:"outlined",value:i,onChange:function(e){return s(e.target.value)}}),Object(j.jsx)(O.a,{type:"number",required:!0,label:"Price",variant:"outlined",value:l,onChange:function(e){return p(e.target.value)}}),Object(j.jsxs)("div",{className:"buttonWrapper",children:[Object(j.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){return function(){var e=A(i,t.pieceUnit);r(Object(J.a)(Object(J.a)({},t),{},{price:Math.floor(100*parseFloat(l))/100,quantity:e,sum:Math.floor(l*e*100)/100}),a)}()},disableElevation:!0,children:"Ok"}),Object(j.jsx)(x.a,{variant:"contained",color:"default",onClick:function(){r()},disableElevation:!0,children:"Cancel"}),Object(j.jsx)(x.a,{variant:"contained",color:"secondary",onClick:function(){r({},a)},disableElevation:!0,children:"Delete"})]})]})})},be="cash-info",je=function(){var e=Object(v.b)(),t=Object(n.useState)(""),a=Object(f.a)(t,2),r=a[0],c=a[1];function o(){return{id:"",name:"",groupId:"",unitId:"",price:0,remainder:0,tax:0}}var i=Object(n.useState)(o),s=Object(f.a)(i,2),u=s[0],d=s[1],l=Object(n.useState)(1),p=Object(f.a)(l,2),b=p[0],h=p[1],m=Object(n.useState)(function(){var e=localStorage.getItem(be);return e?JSON.parse(e):{nextNumber:1}}()),N=Object(f.a)(m,2),E=N[0],D=N[1],S=Object(n.useState)({show:!1}),P=Object(f.a)(S,2),B=P[0],F=P[1];Object(n.useEffect)((function(){e(function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(w,"/").concat(k)).then((function(e){return e.data}));case 3:a=e.sent,t({type:ce,payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(y.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.get("".concat(w,"/").concat(C,"/").concat(2)).then((function(e){return e.data}));case 3:a=e.sent,console.log("CASH_INFO",a),t({type:oe,payload:a||{id:-1,name:"Unknown cash register with CASH_ID=".concat(2),info:""}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var T=Object(v.c)((function(e){return e.cash.products})),R=Object(v.c)((function(e){return e.cash.details})),M=Object(v.c)((function(e){return e.cash.cashInfo})),G=Object(n.useRef)(null);function L(t){if(t||u&&u.id){var a=t||u,n=A(b,a.pieceUnit),r={id:a.id,name:a.name,price:a.price,quantity:n,unitId:a.unitId,sum:Math.floor(a.price*n*100)/100,tax:a.tax,groupId:a.groupId,pieceUnit:a.pieceUnit};e(function(e){return{type:se,payload:e}}(r)),d({id:"",name:"",groupId:"",unitId:"",price:0,remainder:0,tax:0})}c(""),h(1)}function W(){R.length&&(e({type:le,payload:[]}),d({id:"",name:"",groupId:"",unitId:"",price:0,remainder:0,tax:0}),c(""),h(1))}function H(){if(R.length){e(function(e,t,a,n){return function(){var r=Object(y.a)(g.a.mark((function r(c){var o,i,s;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.map((function(e){return{productDto:{id:e.id},quantity:e.quantity,price:e.price,sum:parseFloat(e.sum)}})),i={id:String(t),cash:{id:a},dateTime:(new Date).toJSON(),details:o,sum:parseFloat(n)},console.log("CHECK BODY:",i),r.prev=3,r.next=6,I.a.post("".concat(w,"/").concat(_),i).then((function(e){return e.data}));case 6:s=r.sent,console.log(s),c({type:ie,payload:[]}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(3),console.log(r.t0);case 15:case"end":return r.stop()}}),r,null,[[3,12]])})));return function(e){return r.apply(this,arguments)}}()}(R,E.nextNumber,2,parseFloat(function(){return e=R.map((function(e){return e.price*e.quantity})).reduce((function(e,t){return e+t}),0),Math.round(100*e)/100;var e}())));var t={nextNumber:E.nextNumber+1};!function(e){console.log(e),localStorage.setItem(be,JSON.stringify(e))}(t),D(t)}}Object(n.useEffect)((function(){console.log("changed details"),G.current.scrollIntoView(!1)}),[R]);var Y=[{field:"_n",headerName:"\u2116",width:20},{field:"id",headerName:"Code",width:120},{field:"name",headerName:"Name",width:120},{field:"price",headerName:"Price",width:80,type:"number"},{field:"quantity",headerName:"Quantity",width:80,type:"number"},{field:"unitId",headerName:"Unit",width:50},{field:"_btn",headerName:"...",width:80}];return Object(j.jsxs)(j.Fragment,{children:[B.show?Object(j.jsx)(pe,{detail:B.detail,index:B.index,closeHandler:function(t,a){if(F({show:!1}),t){if(!t.id)return console.log("EditDetail result: DELETE"),void e(function(e){return{type:ue,payload:e}}(a));console.log("EditDetail result: OK"),e(function(e,t){return{type:de,payload:{detail:e,index:t}}}(t,a))}else console.log("EditDetail result: CANCEL")}}):Object(j.jsx)(j.Fragment,{}),Object(j.jsxs)("div",{className:re.a.wrapper,children:[Object(j.jsxs)("div",{className:re.a.checkwrapper,children:[Object(j.jsxs)("div",{className:re.a.infowrapper,children:[Object(j.jsxs)("span",{children:["Check \u2116 ",E.nextNumber]}),Object(j.jsx)("span",{children:M.name}),Object(j.jsx)("span",{children:M.info})]}),Object(j.jsx)("div",{className:re.a.headerwrapper,children:Object(j.jsx)("div",{className:re.a.header,children:Y.map((function(e,t){return Object(j.jsxs)("span",{style:{width:"".concat(e.width,"px")},children:[e.headerName," "]},t)}))})}),Object(j.jsxs)("div",{className:re.a.gridwrapper,children:[R.map((function(e,t){return Object(j.jsxs)("div",{className:re.a.gridrowwrapper,children:[Object(j.jsx)("span",{style:{width:"".concat(Y[0].width,"px"),textAlign:"number"===Y[0].type?"right":"left"},children:t+1}),Object(j.jsx)("span",{style:{width:"".concat(Y[1].width,"px"),textAlign:"number"===Y[1].type?"right":"left"},children:e.id}),Object(j.jsx)("span",{style:{width:"".concat(Y[2].width,"px"),textAlign:"number"===Y[2].type?"right":"left"},children:e.name}),Object(j.jsx)("span",{style:{width:"".concat(Y[3].width,"px"),textAlign:"number"===Y[3].type?"right":"left"},children:q(e.price)}),Object(j.jsx)("span",{style:{width:"".concat(Y[4].width,"px"),textAlign:"number"===Y[4].type?"right":"left"},children:U(e.quantity,e.pieceUnit)}),Object(j.jsx)("span",{style:{width:"".concat(Y[5].width,"px"),textAlign:"number"===Y[5].type?"right":"left"},children:e.unitId}),Object(j.jsx)(x.a,{variant:"outlined",disableElevation:!0,onClick:function(){F({show:!0,detail:e,index:t})},children:"..."})]},t)})),Object(j.jsx)("div",{ref:G})]})]}),Object(j.jsxs)("div",{className:re.a.controlwrapper,children:[Object(j.jsxs)("div",{className:re.a.inputwrapper,children:[Object(j.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){return function(){if(T&&T.length){var e=T.length,t=Math.floor(Math.random()*e),a=T[t].id;console.log(e,t,a,T,T[t]),L(Object(J.a)({},T[t]))}}()},disableElevation:!0,children:"SCAN"}),Object(j.jsx)("div",{className:re.a.productinfo,children:u&&u.id?Object(j.jsxs)(j.Fragment,{children:[u.id,"  ",Object(j.jsx)("br",{})," ",u.name," ",u.price.toFixed(2)," ",u.tax,"%"]}):Object(j.jsx)(j.Fragment,{})})]}),Object(j.jsxs)("div",{className:re.a.inputwrapper,children:[Object(j.jsx)(O.a,{required:!0,id:"outlined-required",label:"Barcode",variant:"outlined",value:r,onChange:function(e){return c(e.target.value)}}),Object(j.jsx)(x.a,{variant:"outlined",color:"primary",onClick:function(){return function(){var e=T.find((function(e){return e.id===r}));e&&d(Object(J.a)({},e)),c("")}()},disableElevation:!0,children:"Find"}),Object(j.jsx)(O.a,{type:"number",required:!0,id:"outlined-required",label:"Quantity",variant:"outlined",value:b,onChange:function(e){return h(e.target.value)}}),Object(j.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){return L()},disableElevation:!0,children:"ADD"})]}),Object(j.jsxs)("div",{style:{display:"flex"},children:[Object(j.jsxs)("div",{className:re.a.totalwrapper,children:[Object(j.jsx)("span",{children:"TOTAL"}),Object(j.jsxs)("span",{children:[q(R.map((function(e){return e.price*e.quantity})).reduce((function(e,t){return e+t}),0))," "]}),Object(j.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){return H()},disableElevation:!0,children:"Done / PAY CHECK"})]}),Object(j.jsx)("div",{className:re.a.cancelwrapper,children:Object(j.jsx)(x.a,{variant:"contained",color:"secondary",onClick:function(){return W()},disableElevation:!0,children:"Cancel / Clear check"})})]})]})]})]})},he=a(23),fe="[reports] set sales data",Oe="[reports] set group sales data",xe="[reports] set start date",ve="[reports] set finish date";function me(e,t){return function(){var a=Object(y.a)(g.a.mark((function a(n){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I.a.get("".concat(w,"/").concat("report/sales","?from=").concat(e,"&to=").concat(t)).then((function(e){return e.data}));case 3:r=a.sent,n({type:fe,payload:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("ERROR",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}function ge(e,t){return function(){var a=Object(y.a)(g.a.mark((function a(n){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,I.a.get("".concat(w,"/").concat("report/group-sales","?from=").concat(e,"&to=").concat(t)).then((function(e){return e.data}));case 3:r=a.sent,n({type:Oe,payload:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("ERROR",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}var ye=a(81);function we(e){return Object(he.a)(e).map((function(e){return{x:e.stringDate,y:e.sum}}))}function ke(e){console.log(e);var t=[{label:"Series 1",data:we(e)}],a=r.a.useMemo((function(){return[{primary:!0,type:"ordinal",position:"bottom"},{type:"linear",position:"left"}]}),[]);return Object(j.jsx)("div",{style:{width:"80vw",height:"30vh"},children:Object(j.jsx)(ye.Chart,{data:t,axes:a})})}var _e=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.report.sales})),a=Object(v.c)((function(e){return e.report.groupSales})),r=Object(v.c)((function(e){return e.report.from})),c=Object(v.c)((function(e){return e.report.to}));return Object(n.useEffect)((function(){e(me(r,c)),e(ge(r,c))}),[]),Object(j.jsxs)("div",{style:{marginTop:"20px"},children:[Object(j.jsx)("h3",{style:{margin:"10px 0",backgroundColor:"navy",color:"white"},children:"Sales report"}),Object(j.jsxs)("label",{children:["From ",Object(j.jsx)("input",{type:"date",onChange:function(t){return e(function(e){return{type:xe,payload:e}}(t.target.value))},value:r})]}),Object(j.jsxs)("label",{children:[" to ",Object(j.jsx)("input",{type:"date",onChange:function(t){return e(function(e){return{type:ve,payload:e}}(t.target.value))},value:c})]}),Object(j.jsx)("button",{onClick:function(){e(me(r,c)),e(ge(r,c))},children:"Report"}),ke(t),console.log(t),Object(j.jsxs)("h3",{style:{margin:"10px 0",backgroundColor:"navy",color:"white"},children:["TOTAL :",q(a.map((function(e){return e.data.map((function(e){return e.sum})).reduce((function(e,t){return e+t}),0)})).reduce((function(e,t){return e+t}),0))]}),Object(j.jsx)("ol",{children:a.map((function(e,t){return Object(j.jsxs)("li",{children:[e.groupName,". ",Object(j.jsxs)("b",{children:["(",q(e.data.map((function(e){return e.sum})).reduce((function(e,t){return e+t}),0)),")"]}),Object(j.jsx)("ul",{children:e.data.map((function(t,a){return Object(j.jsxs)("li",{children:[Object(j.jsx)("span",{children:t.stringDate})," \xa0\xa0 ",Object(j.jsx)("span",{style:{color:"darkgreen"},children:q(t.sum)})]},e.groupId+a)}))})]},t)}))})]})},Ce=function(){return Object(j.jsx)(j.Fragment,{children:"Retail"})};var Ne=function(){return Object(j.jsxs)(i.a,{children:[Object(j.jsx)(h,{}),Object(j.jsxs)(s.c,{children:[Object(j.jsx)(s.a,{path:d,exact:!0,component:je}),Object(j.jsx)(s.a,{path:l,exact:!0,component:ae}),Object(j.jsx)(s.a,{path:p,exact:!0,component:_e}),Object(j.jsx)(s.a,{path:"/",exact:!0,component:Ce})]})]})},Ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,174)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))},Ee={cashInfo:{},details:[],products:[]};var De={products:[],cashes:[],groups:[],units:[],checks:[]};var Se={sales:[],groupSales:[],from:function(){var e=new Date;return e.setMonth(e.getMonth()-1),e.toISOString().substr(0,10)}(),to:(new Date).toISOString().substr(0,10)};var Pe=a(42),Be=a(82),Fe=Object(Pe.c)({cash:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return{details:e.details,products:e.products,cashInfo:t.payload};case ce:return{details:e.details,products:t.payload.slice(0),cashInfo:e.cashInfo};case se:return{details:[].concat(Object(he.a)(e.details),[t.payload]),products:e.products,cashInfo:e.cashInfo};case de:var a=Object(he.a)(e.details);return a[t.payload.index]=Object(J.a)({},t.payload.detail),{details:a,products:e.products,cashInfo:e.cashInfo};case ue:var n=Object(he.a)(e.details);return n.splice(t.payload,1),{details:n,products:e.products,cashInfo:e.cashInfo};case ie:return{details:t.payload,products:e.products,cashInfo:e.cashInfo};case le:return Object(J.a)(Object(J.a)({},e),{},{details:t.payload})}return e},backoffice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return console.log(Object(J.a)(Object(J.a)({},e),{},{products:t.payload})),Object(J.a)(Object(J.a)({},e),{},{products:t.payload});case D:return console.log(Object(J.a)(Object(J.a)({},e),{},{products:[t.payload].concat(Object(he.a)(e.products))})),Object(J.a)(Object(J.a)({},e),{},{products:[t.payload].concat(Object(he.a)(e.products))});case S:var a=t.payload,n=e.products.findIndex((function(e){return e.id===a.id})),r=Object(he.a)(e.products);return r.splice(n,1,a),console.log(Object(J.a)(Object(J.a)({},e),{},{products:r})),Object(J.a)(Object(J.a)({},e),{},{products:r});case P:var c=t.payload,o=e.products.findIndex((function(e){return e.id===c})),i=Object(he.a)(e.products);return console.log("REDUCER REMOVE PRODUCT: ID="+c+", INDEX="+o,Object(he.a)(i)),i.splice(o,1),console.log("REDUCER REMOVE PRODUCT: AFTER SPLICE: ",Object(he.a)(i)),console.log(Object(J.a)(Object(J.a)({},e),{},{products:i})),Object(J.a)(Object(J.a)({},e),{},{products:i});case B:return console.log(Object(J.a)(Object(J.a)({},e),{},{cashes:t.payload})),Object(J.a)(Object(J.a)({},e),{},{cashes:t.payload});case F:return console.log(Object(J.a)(Object(J.a)({},e),{},{groups:t.payload})),Object(J.a)(Object(J.a)({},e),{},{groups:t.payload});case T:return console.log(Object(J.a)(Object(J.a)({},e),{},{units:t.payload})),Object(J.a)(Object(J.a)({},e),{},{units:t.payload});case R:return console.log(Object(J.a)(Object(J.a)({},e),{},{checks:t.payload})),Object(J.a)(Object(J.a)({},e),{},{checks:t.payload});default:return console.log(e),e}},report:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return Object(J.a)(Object(J.a)({},e),{},{sales:t.payload});case Oe:return Object(J.a)(Object(J.a)({},e),{},{groupSales:t.payload});case xe:return Object(J.a)(Object(J.a)({},e),{},{from:t.payload});case ve:return Object(J.a)(Object(J.a)({},e),{},{to:t.payload});default:return e}}}),Te=Object(Pe.d)(Fe,Object(Pe.a)(Be.a));o.a.render(Object(j.jsx)(v.a,{store:Te,children:Object(j.jsx)(Ne,{})}),document.getElementById("root")),Ie()},20:function(e,t,a){e.exports={wrapper:"Cash_wrapper__2zhTT",infowrapper:"Cash_infowrapper__26FYi",inputwrapper:"Cash_inputwrapper__2U6vb",gridwrapper:"Cash_gridwrapper__3PlyZ",gridrowwrapper:"Cash_gridrowwrapper__2v5Mi",header:"Cash_header__2v_kM",headerwrapper:"Cash_headerwrapper__263jc",totalwrapper:"Cash_totalwrapper__38L5Q",cancelwrapper:"Cash_cancelwrapper__1DlZI",productinfo:"Cash_productinfo__1QwqA"}},28:function(e,t,a){e.exports={wrapper:"TableGrid_wrapper__2QD7O",header:"TableGrid_header__1SwKW",headerItem:"TableGrid_headerItem__2sO-v",headerBtn:"TableGrid_headerBtn__P9X0U",body:"TableGrid_body__1_-AF",bodyLine:"TableGrid_bodyLine__2KEGv",bodyBtn:"TableGrid_bodyBtn__2YXDD",bodyItem:"TableGrid_bodyItem__1guVZ"}},46:function(e,t,a){e.exports={wrapBackoffice:"Backoffice_wrapBackoffice__mYG4T",wrapProducts:"Backoffice_wrapProducts__cfEE8",wrapProductsControl:"Backoffice_wrapProductsControl__2hfMM","add-product":"Backoffice_add-product__u0pft",wrapGroups:"Backoffice_wrapGroups__1j75i",wrapUnits:"Backoffice_wrapUnits__tjzpw",wrapCashes:"Backoffice_wrapCashes__37kCR",wrapChecks:"Backoffice_wrapChecks__1gWyb"}},51:function(e,t,a){e.exports={modalBackground:"ProductDetail_modalBackground__3_ZL8",modal:"ProductDetail_modal__70aRN",headerWrapper:"ProductDetail_headerWrapper__2gOkt",inputWrapper:"ProductDetail_inputWrapper__c3NEQ",buttonWrapper:"ProductDetail_buttonWrapper__1YNkW"}},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[130,1,2]]]);
//# sourceMappingURL=main.60719e44.chunk.js.map