{"version":3,"sources":["config/menu.js","components/library/Navigator.js","config/server.js","redux/actions-backoffice.js","utils/utilFunctions.js","models/product.js","components/library/tableGrid/TableGrid.js","components/pages/backoffice/ProductDetail.js","config/crudConstants.js","components/pages/backoffice/Backoffice.js","redux/actions-cash.js","components/pages/cash/EditDetail.js","components/pages/cash/Cash.js","redux/actions-report.js","components/pages/report/Report.js","components/pages/retail/Retail.js","App.js","reportWebVitals.js","redux/reducer-cash.js","redux/reducer-backoffice.js","redux/reducer-report.js","redux/store.js","index.js","components/pages/cash/Cash.module.css","components/library/tableGrid/TableGrid.module.css","components/pages/retail/Retail.module.css","components/pages/backoffice/Backoffice.module.css","components/pages/backoffice/ProductDetail.module.css"],"names":["PATH_CASH","PATH_BACKOFFICE","PATH_REPORTS","ITEMS","path","label","Navigator","map","item","index","Link","component","NavLink","exact","to","style","margin","URL","URL_PATH_PRODUCT","URL_PATH_CHECK","URL_PATH_CASH","SET_BACKOFFICE_PRODUCTS","ADD_PRODUCT","UPDATE_PRODUCT","REMOVE_PRODUCT","SET_BACKOFFICE_CASHES","SET_BACKOFFICE_GROUPS","SET_BACKOFFICE_UNITS","SET_BACKOFFICE_CHECKS","normalizeQuantity","quantity","pieceUnit","parseInt","parseFloat","normalizeStringQuantity","toFixed","normalizeStringSum","sum","Math","round","toLocaleString","currency","product","TableGrid","datasource","needBtn","onBtnClickCallback","columns","formatField","value","formattedValue","length","className","classes","header","headerArr","i","push","width","headerItem","headerName","obj","key","Object","keys","headerBtn","wrapper","body","bodyLine","bodyArr","textAlign","type","bodyItem","field","bodyBtn","onClick","ProductDetail","detail","closeHandler","useState","setProduct","console","log","groups","useSelector","state","backoffice","units","ADD_MODE","onChangeHandler","target","id","checked","modalBackground","modal","headerWrapper","TextField","required","variant","onChange","disabled","inputWrapper","name","FormControl","InputLabel","Select","labelId","groupId","groupName","find","v","MenuItem","price","tax","remainder","unitId","unit","unitName","manufacturer","country","Button","color","disableElevation","Backoffice","prodSearchString","setProdSearchString","show","productDetail","setProductDetail","dispatch","useDispatch","cashes","products","checks","useEffect","a","Axios","get","then","response","data","payload","error","onBodyBtnClickHandler","newProduct","post","removedProductId","delete","updatedProduct","put","wrapBackoffice","wrapProducts","wrapProductsControl","event","searchString","prods","wrapGroups","wrapUnits","SET_CASH_PRODUCTS","SET_CASH_INFO","SAVE_CASH_CHECK","ADD_CASH_DETAIL","DELETE_CASH_DETAIL","UPDATE_CASH_DETAIL","CLEAR_CASH_DETAILS","EditDetail","setQuantity","setPrice","normQuality","floor","okOnClickHandler","Cash","bar","setBar","getEmptyProduct","editDetail","setEditDetail","cashInfo","info","cash","details","divRef","useRef","addOnClickHandler","productFromScan","prod","normQuantity","Actions","totalOnCancelHandler","totalOnClickHandler","checkId","cashId","totalSum","detailsToCheck","d","productDto","String","dateTime","Date","toJSON","reduce","p","c","calcTotal","current","scrollIntoView","checkwrapper","infowrapper","headerwrapper","gridwrapper","gridrowwrapper","ref","controlwrapper","inputwrapper","maxRange","random","randomBar","scanOnClickHandler","productinfo","barCodeOnClickHandler","display","totalwrapper","cancelwrapper","SET_REPORT_SALES_DATA","SET_REPORT_GROUP_SALES_DATA","SET_DATE_FROM","SET_DATE_TO","getSalesReportData","from","axios","salesReportData","getGroupSalesReportData","getData","chartData","x","stringDate","y","MyChart","axes","React","useMemo","primary","position","height","Report","salesChartData","report","sales","groupSalesData","groupSales","marginTop","backgroundColor","e","gr","Retail","history","mrgntop30px","cursorPointer","Menu","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initState","fromDate","setMonth","getMonth","toISOString","substr","reducers","combineReducers","cashState","action","slice","newDetails","splice","findIndex","newProducts","actions","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.34734d95.chunk.js","sourcesContent":["export const PATH_RETAIL = '/';\r\nexport const PATH_CASH = '/cash';\r\nexport const PATH_BACKOFFICE = '/backoffice';\r\nexport const PATH_REPORTS = '/reports';\r\nexport const ITEMS = [  \r\n    {path: PATH_CASH, label: 'POS'},\r\n    {path: PATH_BACKOFFICE, label: 'BackOffice'},\r\n    {path: PATH_REPORTS, label: 'Reports'},\r\n    {path: PATH_RETAIL, label: 'About'}  \r\n]\r\n","import React from \"react\";\r\nimport {NavLink} from 'react-router-dom';\r\nimport Link from '@material-ui/core/Link';\r\nimport {PATH_CASH,PATH_BACKOFFICE,PATH_REPORTS,PATH_RETAIL,ITEMS} from '../../config/menu'\r\nimport './Navigator.css'\r\nimport classes from './Navigator.module.css'\r\nconst Navigator = () => {\r\n    function getLinks() {\r\n        return ITEMS.map((item, index) =>\r\n        <Link component={NavLink} exact to={item.path} key={index} style={{margin: 20}}>{item.label}</Link>)\r\n    }\r\n    return <nav>\r\n        {getLinks()}\r\n    </nav>\r\n}\r\nexport default Navigator;","// export const URL='http://192.168.1.15:8080';\r\nexport const URL='https://retail-back-end.herokuapp.com/';\r\nexport const URL_PATH_PRODUCT='product';\r\nexport const URL_PATH_CHECK='check';\r\nexport const URL_PATH_CASH='cash-register';\r\nexport const URL_PATH_GROUP='group';\r\nexport const URL_PATH_UNIT='unit';\r\nexport const URL_PATH_REPORT_SALES='report/sales';\r\nexport const URL_PATH_REPORT_GROUP_SALES='report/group-sales';\r\nexport const CASH_ID=2;\r\n","import {URL, URL_PATH_PRODUCT, URL_PATH_CHECK, URL_PATH_CASH, URL_PATH_GROUP, URL_PATH_UNIT} from '../config/server'\r\nimport Axios, {AxiosError} from \"axios\";\r\n\r\nexport const SET_BACKOFFICE_PRODUCTS = \"[backoffice]-get-products\";\r\nexport const ADD_PRODUCT             = \"[backoffice]-add-product\";\r\nexport const UPDATE_PRODUCT          = \"[backoffice]-update-product\";\r\nexport const REMOVE_PRODUCT          = \"[backoffice]-remove-product\";\r\nexport const SET_BACKOFFICE_CASHES   = \"[backoffice]-get-cashes\";\r\nexport const SET_BACKOFFICE_GROUPS   = \"[backoffice]-get-groups\";\r\nexport const SET_BACKOFFICE_UNITS    = \"[backoffice]-get-units\";\r\nexport const SET_BACKOFFICE_CHECKS   = \"[backoffice]-get-checks\";\r\nexport function findProducts(searchString){\r\n    return async (dispatch)=>{\r\n        try{\r\n            const prods = await Axios.get(`${URL}/${URL_PATH_PRODUCT}?search=${searchString}`).then(response => response.data);\r\n            dispatch({type:SET_BACKOFFICE_PRODUCTS, payload:prods});\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\n\r\nexport function addProduct(newProduct){\r\n    return async (dispatch)=>{\r\n        const body = {\r\n            \"id\":newProduct.id,\r\n            \"name\":newProduct.name,\r\n            \"groupId\":newProduct.groupId,\r\n            \"unitId\":newProduct.unitId,\r\n            \"price\":newProduct.price,\r\n            \"remainder\":newProduct.remainder,\r\n            \"tax\":newProduct.tax,\r\n            \"manufacturer\":newProduct.manufacturer,\r\n            \"country\":newProduct.country\r\n        }\r\n        try{\r\n            const response = await Axios.post(`${URL}/${URL_PATH_PRODUCT}`,body).then(response => response.data);\r\n            console.log(response);\r\n            dispatch({type:ADD_PRODUCT, payload:newProduct});\r\n\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\n\r\nexport function updateProduct(updatedProduct){\r\n    return async (dispatch)=>{\r\n        const body = {\r\n            \"id\":updatedProduct.id,\r\n            \"name\":updatedProduct.name,\r\n            \"groupId\":updatedProduct.groupId,\r\n            \"unitId\":updatedProduct.unitId,\r\n            \"price\":updatedProduct.price,\r\n            \"remainder\":updatedProduct.remainder,\r\n            \"tax\":updatedProduct.tax,\r\n            \"manufacturer\":updatedProduct.manufacturer,\r\n            \"country\":updatedProduct.country\r\n        }\r\n        try{\r\n            const response = await Axios.put(`${URL}/${URL_PATH_PRODUCT}`,body).then(response => response.data);\r\n            console.log(response);\r\n            dispatch({type:UPDATE_PRODUCT, payload:updatedProduct});\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\n\r\nexport function removeProduct(removedProductId){\r\n    return async (dispatch)=>{\r\n        try{\r\n            const response = await Axios.delete(`${URL}/${URL_PATH_PRODUCT}/${removedProductId}`).then(response => response.data);\r\n            console.log(response);\r\n            console.log(\"ACTIONS_REMOVE_PRODUCT:ID=\"+removedProductId);\r\n            dispatch({type:REMOVE_PRODUCT, payload:removedProductId});\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\n\r\n\r\nexport function findChecks(checkId){\r\n    return async (dispatch)=>{\r\n        try{\r\n            const checks = await Axios.get(`${URL}/${URL_PATH_CHECK}/${checkId}`).then(response => response.data);\r\n            dispatch({type:SET_BACKOFFICE_CHECKS, payload:checks});\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\nexport function getCashes(){\r\n    return async (dispatch)=>{\r\n        try{\r\n            const cashes = await Axios.get(`${URL}/${URL_PATH_CASH}`).then(response => response.data);\r\n            dispatch({type:SET_BACKOFFICE_CASHES, payload:cashes});\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\nexport function getGroups(){\r\n    return async (dispatch)=>{\r\n        try{\r\n            const groups = await Axios.get(`${URL}/${URL_PATH_GROUP}`).then(response => response.data);\r\n            dispatch({type:SET_BACKOFFICE_GROUPS, payload:groups});\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\nexport function getUnits(){\r\n    return async (dispatch)=>{\r\n        try{\r\n            const units = await Axios.get(`${URL}/${URL_PATH_UNIT}`).then(response => response.data);\r\n            dispatch({type:SET_BACKOFFICE_UNITS, payload:units});\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\n","export function normalizeQuantity( quantity, pieceUnit ){\r\n    return pieceUnit?parseInt(quantity):parseFloat(quantity);\r\n};\r\nexport function normalizeStringQuantity( quantity, pieceUnit ){\r\n    return pieceUnit?parseInt(quantity).toFixed(0):parseFloat(quantity).toFixed(3);\r\n};\r\nexport function normalizeSum( sum ){\r\n    // return Math.floor(sum*100)/100;\r\n    return Math.round(sum*100)/100;\r\n};\r\nexport function normalizeStringSum( sum ){\r\n    // return (Math.floor(sum*100)/100).toLocaleString('iw-en', { style: 'currency', currency: 'ILS' });\r\n    return (Math.round(sum*100)/100).toLocaleString('iw-en', { style: 'currency', currency: 'ILS' });\r\n};\r\n","\r\nconst product = {\r\n    \"id\":\"\",\r\n    \"name\":\"\",\r\n    \"groupId\":\"\",\r\n    \"groupName\":\"\",\r\n    \"unitId\":\"\",\r\n    \"unitName\":\"\",\r\n    \"tax\":0.0,\r\n    \"price\":0.00,\r\n    \"remainder\":0.0,\r\n    \"manufacturer\":\"\",\r\n    \"country\":\"\",\r\n    \"pieceUnit\":true\r\n};\r\nexport function getEmptyProduct(){\r\n    return product;\r\n};\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport classes from './TableGrid.module.css'\r\n\r\nconst TableGrid =  ({datasource, needBtn, onBtnClickCallback, columns})=>{\r\n    const btnWidth = 40;\r\n    const scrollWidth = 20;\r\n\r\n    function formatField(value){\r\n        const formattedValue = value;\r\n        switch(typeof value){\r\n            case 'boolean':\r\n                formattedValue = value === true ? 'YES':'no';\r\n                break;\r\n        }\r\n        return formattedValue;\r\n    }\r\n\r\n    return (\r\n        datasource.length === 0 && !columns \r\n        ?\r\n        <>empty datasource</>    \r\n        :\r\n        <>\r\n            <div className={classes.header}>\r\n                {\r\n                   (()=>{\r\n                       const headerArr = [];\r\n                       if (!columns){\r\n                           const obj = datasource[0];\r\n                           for(let key in obj){\r\n                               headerArr.push(<div style={{width:`${100/Object.keys(obj).length}%` }} key={key} className={classes.headerItem}>{key}</div>);\r\n                           }\r\n                                // headerArr.push(<div style={{width:`${(needBtn?btnWidth:0)+scrollWidth}px`}} key={headerArr.length} className={classes.headerBtn}>&nbsp;</div>)\r\n                       }else{\r\n                            // const obj = columns;\r\n                            for(let i=0;i<columns.length;i++){\r\n                                headerArr.push(<div style={{width:`${columns[i].width}px`}} key={i} className={classes.headerItem}>{columns[i].headerName}</div>);\r\n                            }\r\n                        }\r\n                       headerArr.push(<div style={{width:`${(needBtn?btnWidth:0)+scrollWidth}px`}} key={headerArr.length} className={classes.headerBtn}>&nbsp;</div>)\r\n                       return headerArr;\r\n                   })()\r\n                }\r\n            </div>\r\n        <div className={classes.wrapper}>\r\n            <div className={classes.body}>\r\n                {\r\n                    datasource.map((obj, i)=>\r\n                        <div key={i} className={classes.bodyLine}>\r\n                           {(()=> {\r\n                               const bodyArr = [];\r\n                               if (!columns){\r\n                                    for(let key in obj){\r\n                                        bodyArr.push(<div style={{width:`${100/Object.keys(obj).length}%` }} key={key} \r\n                                                className={classes.bodyItem}>\r\n                                            {typeof obj[key] === \"boolean\"?(obj[key]===true?'YES':'no'):obj[key]}\r\n                                            </div>);\r\n                                    }\r\n                                }else{\r\n                                    for(let i=0; i<columns.length;i++){\r\n                                        bodyArr.push(<div style={{width:`${columns[i].width}px`,textAlign:`${columns[i].type==='number'?'right':'left'}`}} key={i} \r\n                                                className={classes.bodyItem}>\r\n                                            {formatField(obj[columns[i].field])}\r\n                                            </div>);\r\n                                    }\r\n                                }\r\n                                if (needBtn){\r\n                                    bodyArr.push(<button style={{width:`${btnWidth}px`}} key={bodyArr.length} \r\n                                                className={classes.bodyBtn} onClick={()=>{onBtnClickCallback(obj,i)}} >\r\n                                                    ...\r\n                                                </button>)\r\n                               }\r\n                               return bodyArr;\r\n                            })() \r\n                           }\r\n                        </div>\r\n                        )\r\n                }\r\n            </div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nTableGrid.propTypes = {\r\n    datasource:PropTypes.array.isRequired,\r\n    needBtn:PropTypes.bool,\r\n    onBtnClickCallback:PropTypes.func,\r\n    columns:PropTypes.array\r\n}\r\n\r\nexport default TableGrid;","import React,{useState} from 'react';\r\nimport {useSelector} from \"react-redux\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport CheckBox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport classes from './ProductDetail.module.css';\r\nimport * as Crud from '../../../config/crudConstants';\r\n\r\nexport default function ProductDetail({detail, index, closeHandler}){\r\n    const [product, setProduct] = useState({...detail});\r\n    console.log(\"InProductDetail:\", detail, index);\r\n    const groups = useSelector(state=>state.backoffice.groups);\r\n    const units = useSelector(state=>state.backoffice.units);\r\n    const ADD_MODE = index===Crud.ADD ? true : false;\r\n\r\n    /* Handlers  */\r\n    const onChangeHandler=({target})=>setProduct({...product, [target.id]:target.type==='checkbox'?target.checked:target.value});\r\n    function okOnClickHandler(){ \r\n        if (ADD_MODE){\r\n            closeHandler( product, Crud.ADD); \r\n        }else{\r\n            closeHandler( product, index); \r\n        }\r\n    }\r\n    function cancelOnClickHandler(){ closeHandler({}); }\r\n    function deleteOnClickHandler(){ closeHandler( product, Crud.DELETE);}\r\n\r\n    return (\r\n        <div className={classes.modalBackground}>\r\n            <div className={classes.modal}>\r\n                <div className={classes.headerWrapper}>\r\n                    <TextField type=\"text\" required label=\"Barcode\" variant=\"outlined\" id=\"id\" value={product.id}\r\n                        onChange={onChangeHandler} disabled={!ADD_MODE}/>\r\n                </div>\r\n                <div className={classes.inputWrapper}>\r\n                    <TextField type=\"text\" required label=\"Name\" variant=\"outlined\" id=\"name\" value={product.name}\r\n                        onChange={onChangeHandler} />\r\n\r\n                    <FormControl required /*className={classes.formControl}*/>\r\n                        <InputLabel id=\"group-select-label\">Group</InputLabel>\r\n                        <Select labelId=\"group-select-label\" id=\"group-select\" value={product.groupId}\r\n                        onChange={({target})=>{setProduct({...product, groupId:target.value, groupName:groups.find(v=>v.id===target.value).name})}}\r\n                        >   {groups.map((v,i)=><MenuItem key={i} value={v.id}>{v.name}</MenuItem>)}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <TextField type=\"number\" required label=\"Price\" variant=\"outlined\" id=\"price\" value={product.price}\r\n                        onChange={onChangeHandler} />\r\n\r\n                    <TextField type=\"number\" required label=\"Tax(%)\" variant=\"outlined\" id=\"tax\" value={product.tax}\r\n                        onChange={onChangeHandler} />\r\n                    {/* <TextField type=\"number\" required label=\"Price\" variant=\"outlined\" id=\"price\" value={product.price}\r\n                        onChange={onChangeHandler} /> */}\r\n                    <TextField type=\"number\" required label=\"Remainder\" variant=\"outlined\" id=\"remainder\" value={product.remainder}\r\n                        onChange={onChangeHandler} />\r\n                    <FormControl required /*className={classes.formControl}*/>\r\n                        <InputLabel id=\"unit-select-label\">Unit</InputLabel>\r\n                        <Select labelId=\"unit-select-label\" id=\"unit-select\" value={product.unitId}\r\n                        onChange={({target})=>{\r\n                            const unit = units.find(v=>v.id===target.value);\r\n                            setProduct({...product, unitId:target.value, \r\n                                unitName:unit.name,\r\n                                pieceUnit:unit.pieceUnit\r\n                            })\r\n                        }}\r\n                        >   {units.map((v,i)=><MenuItem key={i} value={v.id}>{v.name}</MenuItem>)}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <TextField type=\"text\" label=\"Manufacturer\" variant=\"outlined\" id=\"manufacturer\" value={product.manufacturer}\r\n                        onChange={onChangeHandler} />\r\n                    <TextField type=\"text\" label=\"Country\" variant=\"outlined\" id=\"country\" value={product.country}\r\n                        onChange={onChangeHandler} />\r\n                    {/* <FormControlLabel\r\n                    control={\r\n                        <CheckBox required color=\"primary\" checked={product.pieceUnit} id=\"pieceUnit\" value={product.pieceUnit}\r\n                            onChange={onChangeHandler} />\r\n                        }\r\n                        label=\"Is a piece unit\"\r\n                      /> */}\r\n                </div>\r\n                <div className=\"buttonWrapper\">\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={()=>okOnClickHandler()} disableElevation>\r\n                        {ADD_MODE ? \"Add\": \"Ok\"}\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"default\" onClick={()=>cancelOnClickHandler()} disableElevation>\r\n                        {ADD_MODE ? \"Close\": \"Cancel\"}\r\n                    </Button>\r\n                    {ADD_MODE ? <></> : <Button variant=\"contained\" color=\"secondary\" onClick={()=>deleteOnClickHandler()} disableElevation>\r\n                        Delete\r\n                    </Button>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","export const DELETE = -2;\r\nexport const ADD = -1;","import React,{ useState, useEffect, useRef } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport * as Actions from '../../../redux/actions-backoffice';\r\nimport {normalizeSum,normalizeStringSum,normalizeQuantity, normalizeStringQuantity} from '../../../utils/utilFunctions';\r\nimport './Backoffice.css';\r\nimport classes from './Backoffice.module.css';\r\nimport {getEmptyProduct} from '../../../models/product'\r\nimport TableGrid from '../../library/tableGrid/TableGrid';\r\nimport ProductDetail from './ProductDetail'\r\nimport * as Crud from '../../../config/crudConstants';\r\n\r\nconst Backoffice=()=>{\r\n    const [prodSearchString, setProdSearchString]=useState(\"\");\r\n    const [checkSearchString, setCheckSearchString]=useState(\"\");\r\n    const [productDetail, setProductDetail]=useState({show:false});\r\n\r\n    const dispatch = useDispatch();\r\n    const cashes = useSelector(state=>state.backoffice.cashes);\r\n    const groups = useSelector(state=>state.backoffice.groups);\r\n    const units = useSelector(state=>state.backoffice.units);\r\n    const products = useSelector(state=>state.backoffice.products);\r\n    const checks = useSelector(state=>state.backoffice.checks);\r\n    \r\n    useEffect(()=>{\r\n        dispatch(Actions.getCashes());\r\n        dispatch(Actions.getGroups());\r\n        dispatch(Actions.getUnits());\r\n    }, []);\r\n\r\n    const onFindProductChangeHandler=(event)=>setProdSearchString(event.target.value);\r\n    const onFindButtonHandler=()=>dispatch(Actions.findProducts(prodSearchString));\r\n    \r\n\r\n    const onBodyBtnClickHandler = (product, index)=>{\r\n        setProductDetail({show:true, product, index })\r\n    };\r\n    const closeProductDetailHandler = (product, index)=>{\r\n\r\n        if (index===Crud.ADD){  //add new product\r\n            console.log(\"After ProductDetail ADD_PRODUCT: \", product, index);\r\n            dispatch(Actions.addProduct(product));\r\n            return;\r\n        }\r\n        setProductDetail({show:false});\r\n        if (index===Crud.DELETE){ //remove product\r\n            console.log(\"After ProductDetail REMOVE_PRODUCT: \", product, index);\r\n            dispatch(Actions.removeProduct(product.id));\r\n            return;\r\n        }\r\n        if (product.id){ //update product\r\n            console.log(\"After ProductDetail UPDATE_PRODUCT: \", product, index);\r\n            dispatch(Actions.updateProduct(product));\r\n            return;\r\n        }\r\n        console.log(\"After ProductDetail CANCEL: \", product, index);\r\n    }\r\n    const onAddProductBtnClickHandler = ()=>{\r\n        onBodyBtnClickHandler(getEmptyProduct(), Crud.ADD);\r\n    }\r\n\r\n    const productColumns = [\r\n        { field: 'id', headerName: 'Code', width: 120 },\r\n        { field: 'name', headerName: 'Name', width: 120 },\r\n        { field: 'groupId', headerName: 'Group', width: 50 },\r\n        { field: 'price', headerName: 'Price', width: 80, type: 'number' },\r\n        { field: 'remainder', headerName: 'Remainder', width: 70, type: 'number' },\r\n        { field: 'unitId', headerName: 'Unit', width: 50 },\r\n        { field: 'tax', headerName: 'Tax %', width: 30, type: 'number' },\r\n        { field: 'country', headerName: 'Country', width: 70},\r\n        { field: 'manufacturer', headerName: 'Manufact', width: 70},\r\n      ];\r\n    return(\r\n        <>\r\n        {productDetail.show ? <ProductDetail detail={productDetail.product} index={productDetail.index} closeHandler={closeProductDetailHandler}/> : <></>}\r\n        <div className={classes.wrapBackoffice}>\r\n            <div className={classes.wrapProducts}>\r\n                <span>products</span>\r\n                <div className={classes.wrapProductsControl}>\r\n                    <TextField required id=\"outlined-required\" label=\"Part of barcode or name\" variant=\"outlined\" \r\n                        onChange={onFindProductChangeHandler} value={prodSearchString}></TextField>\r\n                    <Button variant=\"contained\" id=\"find-products\" color=\"primary\" onClick={onFindButtonHandler}>Find</Button>\r\n                    <Button variant=\"contained\" id=\"add-product\" color=\"primary\" onClick={onAddProductBtnClickHandler}>Add</Button>\r\n                </div>\r\n                <TableGrid datasource = {products} columns={productColumns} needBtn={true} onBtnClickCallback={onBodyBtnClickHandler}/>\r\n            </div>\r\n            <div className={classes.wrapGroups}>\r\n            <span>product groups</span>\r\n                <TableGrid datasource = {groups} needBtn={false}/>\r\n            </div>\r\n            <div className={classes.wrapUnits}>\r\n            <span>units</span>\r\n                <TableGrid datasource = {units} needBtn={false}/>\r\n            </div>\r\n            {/* <div className={classes.wrapCashes}>\r\n            <span>cashes</span>\r\n                <TableGrid datasource = {cashes} needBtn={false}/>\r\n            </div>\r\n            <div className={classes.wrapChecks}>\r\n            <span>checks</span>\r\n            </div> */}\r\n        </div>\r\n        </>\r\n        )\r\n}\r\n\r\nexport default Backoffice;","import {URL, URL_PATH_PRODUCT, URL_PATH_CHECK, URL_PATH_CASH, CASH_ID} from '../config/server'\r\nimport Axios, {AxiosError} from \"axios\";\r\nexport const SET_CASH_PRODUCTS = \"[cash]-set-products\";\r\nexport const SET_CASH_INFO = \"[cash]-set-info\";\r\nexport const SAVE_CASH_CHECK = \"[cash]-save-check\";\r\nexport const ADD_CASH_DETAIL = \"[cash]-add-detail\";\r\nexport const DELETE_CASH_DETAIL = \"[cash]-del-detail\";\r\nexport const UPDATE_CASH_DETAIL = \"[cash]-update-detail\";\r\nexport const CLEAR_CASH_DETAILS = \"[cash]-clear-details\";\r\nexport function getProducts(){\r\n    return async dispatch => {\r\n        try{\r\n            const prods = await Axios.get(`${URL}/${URL_PATH_PRODUCT}`).then(response => response.data);\r\n            dispatch({type:SET_CASH_PRODUCTS, payload:prods});\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\nexport function getCashInfo(){\r\n    return async dispatch => {\r\n        try{\r\n            const cashInfo = await Axios.get(`${URL}/${URL_PATH_CASH}/${CASH_ID}`).then(response => response.data);\r\n            console.log('CASH_INFO',cashInfo);\r\n            dispatch({type:SET_CASH_INFO, payload:cashInfo?cashInfo:{id:-1,name:`Unknown cash register with CASH_ID=${CASH_ID}`, info:\"\"}});\r\n        }catch(e){console.error(e);}\r\n    }\r\n}\r\nexport function saveCheck(details, checkId, cashId, totalSum){\r\n    // console.log(details);\r\n    return async dispatch => {\r\n        const detailsToCheck = details.map( d => { \r\n            return {\r\n                productDto:{id:d.id},\r\n                quantity:d.quantity,\r\n                price:d.price,\r\n                sum:parseFloat(d.sum)\r\n                }\r\n            } );\r\n        const body = {\r\n            id:String(checkId),\r\n            cash:{\r\n                id:cashId,\r\n            },\r\n            dateTime:new Date().toJSON(),\r\n            details:detailsToCheck,\r\n            sum:parseFloat(totalSum)\r\n        }\r\n        console.log(\"CHECK BODY:\",body);\r\n        try{\r\n            const response = await Axios.post(`${URL}/${URL_PATH_CHECK}`, body).then(response => response.data);\r\n            console.log(response);\r\n            const details = []\r\n            dispatch({type:SAVE_CASH_CHECK, payload:details});\r\n        }catch(e){console.log(e);}\r\n    };\r\n}\r\n\r\nexport function clearDetails(){\r\n    return {\r\n        type:CLEAR_CASH_DETAILS,\r\n        payload:[]\r\n    };\r\n}\r\nexport function addDetail(detail){\r\n    return {\r\n        type:ADD_CASH_DETAIL,\r\n        payload:detail\r\n    };\r\n}\r\n\r\nexport function updateDetail(detail, index){\r\n    return {\r\n        type:UPDATE_CASH_DETAIL,\r\n        payload:{detail, index}\r\n    };\r\n}\r\nexport function deleteDetail(index){\r\n    return {\r\n        type:DELETE_CASH_DETAIL,\r\n        payload:index\r\n    };\r\n}\r\n","import  React, {useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classes from './EditDetail.module.css'\r\nimport './EditDetail.css'\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport {normalizeQuantity, normalizeStringQuantity} from '../../../utils/utilFunctions';\r\n\r\nconst EditDetail =({detail, index, closeHandler})=>{\r\n    console.log(\"PROPS\",detail, index, closeHandler);\r\n    const [quantity, setQuantity]=useState(normalizeStringQuantity(detail.quantity,detail.pieceUnit));\r\n    const [price, setPrice]=useState(detail.price.toFixed(2));\r\n    function okOnClickHandler(){ \r\n        const normQuality = normalizeQuantity(quantity, detail.pieceUnit );\r\n        closeHandler( {...detail, price:Math.floor(parseFloat(price)*100)/100, quantity:normQuality, sum:Math.floor(price*normQuality*100)/100}, index); \r\n    }\r\n    function cancelOnClickHandler(){ closeHandler(); }\r\n    function deleteOnClickHandler(){ \r\n        closeHandler( {}, index); \r\n    }\r\n    return (\r\n        <div className=\"modalBackground\">\r\n            <div className=\"modal\">\r\n                <div className=\"headerWrapper\">\r\n                    <span>{detail.id}</span>\r\n                    <span>{detail.name}</span>\r\n                </div>\r\n                <TextField type=\"number\" required label=\"Quantity\" variant=\"outlined\" value={quantity}\r\n                    onChange={(event)=>setQuantity(event.target.value)} />\r\n                <TextField type=\"number\" required label=\"Price\" variant=\"outlined\" value={price}\r\n                    onChange={(event)=>setPrice(event.target.value)} />\r\n                <div className=\"buttonWrapper\">\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={()=>okOnClickHandler()} disableElevation>\r\n                        Ok\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"default\" onClick={()=>cancelOnClickHandler()} disableElevation>\r\n                        Cancel\r\n                    </Button>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={()=>deleteOnClickHandler()} disableElevation>\r\n                        Delete\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nEditDetail.propTypes = {\r\n    closeHandler:PropTypes.func.isRequired,\r\n    index:PropTypes.number.isRequired,\r\n    detail:PropTypes.shape({\r\n        id:PropTypes.string.isRequired,\r\n        name:PropTypes.string.isRequired,\r\n        price:PropTypes.number.isRequired,\r\n        quantity:PropTypes.number.isRequired,\r\n        sum:PropTypes.number,\r\n        tax:PropTypes.number,\r\n        groupId:PropTypes.string,\r\n        pieceUnit:PropTypes.bool.isRequired\r\n    })\r\n};\r\nexport default EditDetail;","import React,{ useState, useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classes from './Cash.module.css';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport * as Actions from '../../../redux/actions-cash';\r\nimport {CASH_ID} from '../../../config/server';\r\nimport EditDetail from './EditDetail';\r\nimport {normalizeSum,normalizeStringSum,normalizeQuantity, normalizeStringQuantity} from '../../../utils/utilFunctions';\r\nconst LOCALSTORAGE_KEY = 'cash-info';\r\nconst Cash=()=>{\r\n    const dispatch = useDispatch();\r\n    const [bar, setBar] = useState('');\r\n    function getEmptyProduct(){\r\n        return {\r\n            \"id\":\"\",\r\n            \"name\":\"\",\r\n            \"groupId\":\"\",\r\n            \"unitId\":\"\",\r\n            \"price\":0,\r\n            \"remainder\":0,\r\n            \"tax\":0\r\n        }\r\n    }\r\n    // function getStartCashInfo(){\r\n    //     const info = localStorage.getItem(LOCALSTORAGE_KEY);\r\n    //     if (info){\r\n    //         return JSON.parse(info);\r\n    //     }\r\n    //     return { nextNumber:1 };\r\n    // }\r\n    const [product, setProduct] = useState(getEmptyProduct);\r\n    const [quantity, setQuantity] = useState(1.00);\r\n    // const [cashInfo, setCashInfo] = useState(getStartCashInfo());\r\n    const [editDetail, setEditDetail] = useState({show:false});\r\n    \r\n\r\n    // function saveCashInfo(newCashInfo){\r\n    //     console.log(newCashInfo);\r\n    //     localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(newCashInfo));\r\n    // }\r\n    useEffect( ()=>{\r\n        dispatch( Actions.getProducts() );\r\n        dispatch(Actions.getCashInfo());\r\n    }, [] );\r\n    const products = useSelector(state=>state.cash.products);\r\n    const details = useSelector(state=>state.cash.details);\r\n    const cash = useSelector(state=>state.cash.cashInfo);\r\n    const divRef = useRef(null);\r\n    useEffect(()=>{\r\n        console.log('changed details');\r\n        divRef.current.scrollIntoView(false);\r\n    }, [details]);\r\n    \r\n    function barCodeOnClickHandler(){\r\n        const prod = products.find(v=>v.id===bar);\r\n        if (prod){\r\n            setProduct({...prod});\r\n        }\r\n        setBar('');\r\n    }\r\n\r\n    function addOnClickHandler(productFromScan){\r\n        if (productFromScan || (product  && product.id)){\r\n            const prod = productFromScan ? productFromScan : product;\r\n            const normQuantity = normalizeQuantity(quantity, prod.pieceUnit);\r\n            const detail = {\r\n                id:prod.id,\r\n                name:prod.name,\r\n                price:prod.price,\r\n                quantity:normQuantity,\r\n                unitId:prod.unitId,\r\n                sum:Math.floor(prod.price * normQuantity * 100)/100,\r\n                tax:prod.tax,\r\n                groupId:prod.groupId,\r\n                pieceUnit:prod.pieceUnit\r\n            }\r\n            dispatch(Actions.addDetail(detail));\r\n            setProduct(getEmptyProduct());\r\n        }\r\n        setBar('');\r\n        setQuantity(1);\r\n    }\r\n\r\n    function scanOnClickHandler(){\r\n        if (!products || !products.length){\r\n            return;\r\n        }\r\n        const maxRange = products.length;\r\n        const index = Math.floor(Math.random() * maxRange);\r\n        const randomBar = products[index].id;\r\n        console.log(maxRange, index, randomBar, products, products[index] );\r\n        addOnClickHandler({...products[index]});\r\n        // setProduct(products[index]);\r\n        // setBar(randomBar) ;\r\n    }\r\n    function totalOnCancelHandler(){\r\n        if (!details.length){\r\n            return\r\n        }\r\n        dispatch(Actions.clearDetails(  ));\r\n        setProduct(getEmptyProduct());\r\n        setBar('');\r\n        setQuantity(1);\r\n    }\r\n    function totalOnClickHandler(){\r\n        if (!details.length){\r\n            return\r\n        }\r\n        // dispatch( Actions.saveCheck( details, cashInfo.nextNumber, CASH_ID, parseFloat( calcTotal() ) ) );\r\n        dispatch( Actions.saveCheck( details, 0, CASH_ID, parseFloat( calcTotal() ) ) );\r\n        // const newCashInfo={nextNumber:cashInfo.nextNumber+1};\r\n        // saveCashInfo(newCashInfo);\r\n        // setCashInfo(newCashInfo);\r\n    }\r\n    function calcTotal(){\r\n        const totalNum = details.map(v=>v.price*v.quantity).reduce((p,c)=>p+=c,0);\r\n        return normalizeSum(totalNum);\r\n    }\r\n    function calcTotalString(){\r\n        // return (details.map(v=>v.price*v.quantity).reduce((p,c)=>p+=c,0)).toFixed(2);\r\n        const totalNum = details.map(v=>v.price*v.quantity).reduce((p,c)=>p+=c,0);\r\n        return normalizeStringSum(totalNum);\r\n    }\r\n    const columns = [\r\n        { field: '_n', headerName: '', width: 20/*, type:'number' */},\r\n        { field: 'id', headerName: 'Code', width: 120 },\r\n        { field: 'name', headerName: 'Name', width: 120 },\r\n        { field: 'price', headerName: 'Price', width: 80, type: 'number' },\r\n        { field: 'quantity', headerName: 'Quantity', width: 80, type: 'number' },\r\n        { field: 'unitId', headerName: 'Unit', width: 50 },\r\n        // { field: 'sum', headerName: 'Sum', width: 120, type: 'number' },\r\n        // { field: 'tax', headerName: 'Tax(%)', width: 80, type: 'number' },\r\n        { field: '_btn', headerName: '...', width: 80}\r\n      ];\r\n    function editDetailOnClickHandler(detail, index){\r\n        setEditDetail({show:true, detail, index});\r\n    }\r\n    function closeEditDetailHandler(detail, index){\r\n        setEditDetail( {show:false} );\r\n        if( !detail ){\r\n            console.log(\"EditDetail result: CANCEL\");\r\n            return;\r\n        }\r\n        if (!detail.id){\r\n            console.log(\"EditDetail result: DELETE\");\r\n            dispatch(Actions.deleteDetail(index));\r\n            return;\r\n            }\r\n        console.log(\"EditDetail result: OK\");\r\n        dispatch(Actions.updateDetail(detail, index));\r\n    }\r\n    return  (\r\n        <>\r\n        {editDetail.show ? <EditDetail detail={editDetail.detail} index={editDetail.index} closeHandler={closeEditDetailHandler}/> : <></>}\r\n\r\n        <div className={classes.wrapper}>\r\n            <div className={classes.checkwrapper}>\r\n                <div className={classes.infowrapper}>\r\n                    {/* <span>Check  {cashInfo.nextNumber}</span> */}\r\n                    <span>{cash.name}</span>\r\n                    <span>{cash.info}</span>\r\n                </div>\r\n\r\n                <div className={classes.headerwrapper}>\r\n                    <div className={classes.header}>\r\n                    {\r\n                        columns.map((v,i)=><span key={i} style={{width:`${v.width}px`}}>{v.headerName} </span>) \r\n                    }\r\n                    {/* <span/> */}\r\n                    </div>\r\n                </div>\r\n                <div className={classes.gridwrapper}>\r\n                    {   \r\n                    details.map((v,i)=><div key={i} className={classes.gridrowwrapper}>\r\n                        <span style={{width:`${columns[0].width}px`,textAlign:columns[0].type===\"number\"?\"right\":\"left\"}}>{i+1}</span>\r\n                        <span style={{width:`${columns[1].width}px`,textAlign:columns[1].type===\"number\"?\"right\":\"left\"}}>{v.id}</span>\r\n                        <span style={{width:`${columns[2].width}px`,textAlign:columns[2].type===\"number\"?\"right\":\"left\"}}>{v.name}</span>\r\n                        <span style={{width:`${columns[3].width}px`,textAlign:columns[3].type===\"number\"?\"right\":\"left\"}}>{normalizeStringSum(v.price)}</span>\r\n                        <span style={{width:`${columns[4].width}px`,textAlign:columns[4].type===\"number\"?\"right\":\"left\"}}>{normalizeStringQuantity(v.quantity,v.pieceUnit)}</span>\r\n                        <span style={{width:`${columns[5].width}px`,textAlign:columns[5].type===\"number\"?\"right\":\"left\"}}>{v.unitId}</span>\r\n                        {/* <span style={{width:`${columns[6].width}px`,textAlign:columns[6].type===\"number\"?\"right\":\"left\"}}>{normalizeStringSum(v.sum)}</span>\r\n                        <span style={{width:`${columns[7].width}px`,textAlign:columns[7].type===\"number\"?\"right\":\"left\"}}>{v.tax}</span> */}\r\n                        <Button variant=\"outlined\" disableElevation onClick={()=>editDetailOnClickHandler(v,i)}>...</Button>\r\n                    </div>)\r\n                    }\r\n                    <div ref={divRef}></div>\r\n                </div>\r\n            </div>\r\n            <div className={classes.controlwrapper}>\r\n                <div className={classes.inputwrapper}>\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={()=>scanOnClickHandler()} disableElevation>\r\n                        SCAN\r\n                    </Button>\r\n                    <div className={classes.productinfo}>\r\n                        {\r\n                            (product && product.id) ? <>{product.id}  <br/> {product.name} {(product.price).toFixed(2)} {product.tax}%</>:<></>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <div className={classes.inputwrapper}>\r\n                    <TextField required id=\"outlined-required\" label=\"Barcode\" variant=\"outlined\" value={bar}\r\n                        onChange={(event)=>setBar(event.target.value)} />\r\n                    <Button variant=\"outlined\" color=\"primary\" onClick={()=>barCodeOnClickHandler()} disableElevation>\r\n                        Find\r\n                    </Button>\r\n                    <TextField type=\"number\" required id=\"outlined-required\" label=\"Quantity\" variant=\"outlined\" value={quantity}\r\n                        onChange={(event)=>setQuantity(event.target.value)} />\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={()=>addOnClickHandler()} disableElevation>\r\n                        ADD\r\n                    </Button>\r\n                </div>\r\n                <div style={{display:\"flex\"}}>\r\n                <div className={classes.totalwrapper}>\r\n                    <span>TOTAL</span>\r\n                    <span>{calcTotalString()} </span>\r\n                    <Button variant=\"contained\" color=\"primary\" onClick={()=>totalOnClickHandler()} disableElevation>\r\n                        Done / PAY CHECK\r\n                    </Button>\r\n                </div> \r\n                <div className={classes.cancelwrapper}>\r\n                    <Button variant=\"contained\" color=\"secondary\" onClick={()=>totalOnCancelHandler()} disableElevation>\r\n                        Cancel / Clear check\r\n                    </Button>\r\n                </div> \r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n        </>\r\n    )  \r\n            \r\n}\r\n\r\nexport default Cash;","import {URL, URL_PATH_REPORT_SALES,URL_PATH_REPORT_GROUP_SALES} from '../config/server';\r\nimport axios from 'axios';\r\n\r\nexport const SET_REPORT_SALES_DATA='[reports] set sales data';\r\nexport const SET_REPORT_GROUP_SALES_DATA='[reports] set group sales data';\r\nexport const SET_DATE_FROM='[reports] set start date';\r\nexport const SET_DATE_TO='[reports] set finish date';\r\n\r\nexport function getSalesReportData(from, to){\r\n    return async (dispatch)=>{\r\n        try{\r\n            const salesReportData = await axios.get(`${URL}/${URL_PATH_REPORT_SALES}?from=${from}&to=${to}`)\r\n                .then(response=>response.data);\r\n            dispatch({type:SET_REPORT_SALES_DATA, payload:salesReportData});\r\n        }catch(e){\r\n            console.log('ERROR',e);\r\n        }\r\n\r\n    }\r\n}\r\nexport function getGroupSalesReportData(from, to){\r\n    return async (dispatch)=>{\r\n        try{\r\n            const salesReportData = await axios.get(`${URL}/${URL_PATH_REPORT_GROUP_SALES}?from=${from}&to=${to}`)\r\n                .then(response=>response.data);\r\n            dispatch({type:SET_REPORT_GROUP_SALES_DATA, payload:salesReportData});\r\n        }catch(e){\r\n            console.log('ERROR',e);\r\n        }\r\n\r\n    }\r\n}\r\nexport function setDateFrom(from){\r\n    return {type:SET_DATE_FROM, payload:from};\r\n}\r\nexport function setDateTo(to){\r\n    return {type:SET_DATE_TO, payload:to};\r\n}","import React,{useEffect, useState} from 'react';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport * as Actions from '../../../redux/actions-report';\r\nimport { Chart } from 'react-charts';\r\nimport {normalizeSum,normalizeStringSum,normalizeQuantity, normalizeStringQuantity} from '../../../utils/utilFunctions';\r\nfunction getData(chartData){\r\n    // const data = [{\"stringDate\":\"2021-02-16\",\"sum\":121733.15},{\"stringDate\":\"2021-02-17\",\"sum\":10499.81},{\"stringDate\":\"2021-02-18\",\"sum\":15635.64},{\"stringDate\":\"2021-02-19\",\"sum\":483.96},{\"stringDate\":\"2021-02-21\",\"sum\":819.26},{\"stringDate\":\"2021-02-22\",\"sum\":778.31},{\"stringDate\":\"2021-02-24\",\"sum\":-4956.08},{\"stringDate\":\"2021-02-25\",\"sum\":189.98}];\r\n    const data = [...chartData];\r\n    return data.map(d=>{return {x:d.stringDate,y:d.sum}});\r\n} \r\n\r\nfunction MyChart(chartData) {\r\n    console.log(chartData)\r\n    const data = /*React.useMemo(\r\n      () => */[\r\n        {\r\n          label: 'Series 1', \r\n        //   data: [{ x: \"2011-01-12\", y: 11 }, { x: \"2011-02-15\", y: 10 }, { x: \"2011-03-12\", y: 9 }]\r\n          data:getData(chartData) \r\n        }/*,\r\n        {\r\n          label: 'Series 2',\r\n          data: [{ x: \"2011-01-12\", y: 10 }, { x: \"2011-02-12\", y: 11 }, { x: \"2011-03-12\", y: 5 }]\r\n        },\r\n        {\r\n          label: 'Series 3',\r\n          data: [{ x: \"2011-01-12\", y: 19 }, { x: \"2011-02-12\", y: 10 }, { x: \"2011-03-12\", y: 10 }]\r\n        }*/\r\n      ]/*,\r\n      []\r\n    )*/\r\n   \r\n    const axes = React.useMemo(\r\n      () => [\r\n        { primary: true, type: 'ordinal', position: 'bottom' },\r\n        { type: 'linear', position: 'left' }\r\n      ],\r\n      []\r\n    )\r\n   \r\n    return (\r\n      <div\r\n        style={{\r\n          width: '80vw',\r\n          height: '30vh'\r\n        }}\r\n      >\r\n        <Chart data={data} axes={axes} />\r\n        {/* <Chart data={chartData} axes={axes} /> */}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n\r\nconst Report=()=>{\r\n    const dispatch = useDispatch();\r\n    const salesChartData = useSelector(state=>state.report.sales);\r\n    const groupSalesData = useSelector(state=>state.report.groupSales);\r\n    const from = useSelector(state=>state.report.from);\r\n    const to = useSelector(state=>state.report.to);\r\n    useEffect(()=>{dispatch(Actions.getSalesReportData(from,to)); dispatch(Actions.getGroupSalesReportData(from,to));},[])\r\n    return<div style={{marginTop:\"20px\"}}>\r\n        <h3 style={{margin:\"10px 0\",backgroundColor:\"navy\",color:\"white\"}}>Sales report</h3>\r\n        <label >From <input type = \"date\" onChange={(e)=>dispatch(Actions.setDateFrom(e.target.value))} value={from}/></label>\r\n        <label > to <input type = \"date\" onChange={(e)=>dispatch(Actions.setDateTo(e.target.value))} value={to}/></label>\r\n        <button onClick={()=>{dispatch(Actions.getSalesReportData(from,to)); dispatch(Actions.getGroupSalesReportData(from,to));}}>Report</button>\r\n        {MyChart(salesChartData)}\r\n        {console.log(salesChartData)}\r\n        <h3 style={{margin:\"10px 0\",backgroundColor:\"navy\",color:\"white\"}}>\r\n            TOTAL : \r\n            {normalizeStringSum(groupSalesData.map(gr=>gr.data.map(d=>d.sum).reduce((p,c)=>p+c, 0)).reduce((p,c)=>p+c, 0))}\r\n        </h3>\r\n        <ol>\r\n        {\r\n            groupSalesData.map((gr, i)=>(\r\n                <li key={i}>\r\n                    {gr.groupName}. <b>({normalizeStringSum(gr.data.map(d=>d.sum).reduce((p,c)=>p+c, 0))})</b>\r\n                    <ul>\r\n                        {gr.data.map((d,i)=><li key={gr.groupId+i}><span>{d.stringDate}</span> &nbsp;&nbsp; <span style={{color:\"darkgreen\"}}>{normalizeStringSum(d.sum)}</span></li>)}\r\n                    </ul>\r\n                </li>\r\n            ))\r\n        }\r\n        </ol>\r\n    </div>\r\n}\r\n\r\nexport default Report;\r\n","import React from 'react';\r\nimport * as Menu from '../../../config/menu'\r\nimport classes from './Retail.module.css';\r\nconst Retail=({history})=>{\r\n    return(\r\n        <div className={classes.wrapper}>\r\n            <h2>Retail Demo Application</h2>\r\n            <button className={`${classes.mrgntop30px} ${classes.cursorPointer}`}\r\n            onClick = {()=>history.push(Menu.PATH_CASH)}\r\n            >POS</button>\r\n            <p>\r\n                The POS tab emulates a POS terminal and allows you to make sales of goods. \r\n                Pressing the SCAN button simulates the reading of the product by a barcode scanner. \r\n                In this case, the goods are selected in random order. \r\n                You can change the quantity and price of a product by clicking the \"...\" button \r\n                in the product line. \r\n                You can also manually enter the desired barcode and immediately indicate \r\n                the required quantity of goods. \r\n                The generated check can be paid by pressing \"DONE / PAY CHECK\" or canceled by \r\n                pressing \"CANCEL / CLEAR CHECK\".\r\n\r\n            </p>\r\n            <button className={`${classes.mrgntop30px} ${classes.cursorPointer}`}\r\n            onClick = {()=>history.push(Menu.PATH_BACKOFFICE)}\r\n            >BackOffice</button>\r\n            <p>\r\n                The BackOffice tab allows you to search, view, add, modify and delete goods. \r\n                Also, there you can see what groups of goods and units of measurement of goods are.\r\n            </p>\r\n            <button className={`${classes.mrgntop30px} ${classes.cursorPointer}`}\r\n            onClick = {()=>history.push(Menu.PATH_REPORTS)}\r\n            >Reports</button>\r\n            <p>\r\n                On the REPORTS tab it is possible to see sales by day in the form of a chart and \r\n                in the form of a report of sales by groups and dates within a certain period.\r\n            </p>\r\n            <h4 className={classes.mrgntop30px}>Backend part</h4>\r\n            <p>\r\n                The backend part was implemented in Java using Spring Web and Spring Data JPA. H2 is used as a database.\r\n            </p>\r\n            <h4 className={classes.mrgntop30px}>Frontend part</h4>\r\n            <p>\r\n                The frontend part is made in Javascript as a single page application using React. \r\n                Redux is used as a centralized store.\r\n            </p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Retail;","import './App.css';\r\nimport {BrowserRouter, Link,Router,Redirect,Route,Switch} from 'react-router-dom';\r\nimport Navigator from './components/library/Navigator';\r\nimport {PATH_CASH,PATH_BACKOFFICE,PATH_REPORTS,PATH_RETAIL} from './config/menu';\r\nimport Backoffice from './components/pages/backoffice/Backoffice';\r\nimport Cash from './components/pages/cash/Cash';\r\nimport Report from './components/pages/report/Report';\r\nimport Retail from './components/pages/retail/Retail';\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <Navigator/>\r\n      <Switch>\r\n        <Route path={PATH_CASH} exact component={Cash}/>\r\n        <Route path={PATH_BACKOFFICE} exact component={Backoffice}/>\r\n        <Route path={PATH_REPORTS} exact component={Report}/>\r\n        <Route path={PATH_RETAIL} exact component={Retail}/>\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {SET_CASH_PRODUCTS,ADD_CASH_DETAIL,UPDATE_CASH_DETAIL,DELETE_CASH_DETAIL,\r\n    CLEAR_CASH_DETAILS,SAVE_CASH_CHECK,SET_CASH_INFO} from './actions-cash';\r\nconst initState={\r\n    cashInfo:{},\r\n    details:[],\r\n    products:[]\r\n}\r\nexport function reducerCash(cashState=initState, action){    \r\n    switch(action.type){\r\n        case SET_CASH_INFO:\r\n            return {details:cashState.details, products:cashState.products, cashInfo:\r\n                action.payload}\r\n        case SET_CASH_PRODUCTS: \r\n            return {details:cashState.details, products: action.payload.slice(0), cashInfo:cashState.cashInfo};\r\n        case ADD_CASH_DETAIL:\r\n            return {details:[...cashState.details, action.payload], products:cashState.products, cashInfo:cashState.cashInfo} ;\r\n        case UPDATE_CASH_DETAIL:{\r\n            const newDetails = [...cashState.details];\r\n            newDetails[action.payload.index] = {...action.payload.detail};\r\n            return {details:newDetails,  products:cashState.products, cashInfo:cashState.cashInfo};}\r\n        case DELETE_CASH_DETAIL:{\r\n            const newDetails = [...cashState.details];\r\n            newDetails.splice(action.payload,1);\r\n            return {details:newDetails,  products:cashState.products, cashInfo:cashState.cashInfo};}\r\n        case SAVE_CASH_CHECK:\r\n            return {details:action.payload,  products:cashState.products, cashInfo:cashState.cashInfo};\r\n        case CLEAR_CASH_DETAILS:\r\n            return {...cashState, details:action.payload};\r\n    }\r\n    return cashState;\r\n}","import {SET_BACKOFFICE_PRODUCTS, ADD_PRODUCT, UPDATE_PRODUCT, REMOVE_PRODUCT, \r\n        SET_BACKOFFICE_CASHES,SET_BACKOFFICE_GROUPS,SET_BACKOFFICE_UNITS,\r\n        SET_BACKOFFICE_CHECKS} from './actions-backoffice';\r\nconst initState = {\r\n    products: [],\r\n    cashes: [],\r\n    groups:[],\r\n    units:[],\r\n    checks:[]\r\n}\r\nexport function reducerBackoffice(state = initState, action){\r\n    switch(action.type){\r\n        case SET_BACKOFFICE_PRODUCTS:\r\n            console.log({...state, products:action.payload});\r\n            return {...state, products:action.payload};\r\n        case ADD_PRODUCT:\r\n            console.log({...state, products:[action.payload, ...state.products]});\r\n            return {...state, products:[action.payload, ...state.products]};\r\n        case UPDATE_PRODUCT:{\r\n            const updatedProduct = action.payload;\r\n            const index = state.products.findIndex(v=>v.id===updatedProduct.id);\r\n            const newProducts=[...state.products];\r\n            newProducts.splice(index,1,updatedProduct);\r\n            console.log({...state, products:newProducts});\r\n            return {...state, products:newProducts};}\r\n        case REMOVE_PRODUCT:{\r\n            const removedProductId = action.payload;\r\n            const index = state.products.findIndex(v=>v.id===removedProductId);\r\n            const newProducts=[...state.products];\r\n           console.log(\"REDUCER REMOVE PRODUCT: ID=\"+removedProductId+\", INDEX=\"+index,[...newProducts] ); \r\n            newProducts.splice(index,1);\r\n           console.log(\"REDUCER REMOVE PRODUCT: AFTER SPLICE: \",[...newProducts] ); \r\n            console.log({...state, products:newProducts});\r\n            return {...state, products:newProducts};}\r\n        case SET_BACKOFFICE_CASHES:\r\n            console.log({...state, cashes:action.payload});\r\n            return {...state, cashes:action.payload};\r\n        case SET_BACKOFFICE_GROUPS:\r\n            console.log({...state, groups:action.payload});\r\n            return {...state, groups:action.payload};\r\n        case SET_BACKOFFICE_UNITS:\r\n            console.log({...state, units:action.payload});\r\n            return {...state, units:action.payload};\r\n        case SET_BACKOFFICE_CHECKS:\r\n            console.log({...state, checks:action.payload});\r\n            return {...state, checks:action.payload};\r\n        default: \r\n        console.log(state);\r\n        return state;\r\n\r\n    }\r\n}\r\n\r\n","import { Switch } from 'react-router-dom';\r\nimport {SET_REPORT_SALES_DATA,SET_REPORT_GROUP_SALES_DATA, SET_DATE_FROM, SET_DATE_TO} from './actions-report';\r\nconst initState = {\r\n    sales : [],\r\n    groupSales : [],\r\n    from: (()=>{const fromDate=new Date(); fromDate.setMonth(fromDate.getMonth() - 1); return fromDate.toISOString().substr(0,10)})(),\r\n    to: new Date().toISOString().substr(0,10)\r\n}\r\nexport function reducerReport(state=initState, actions){\r\n    switch(actions.type){\r\n        case SET_REPORT_SALES_DATA: \r\n                return {...state, sales:actions.payload};\r\n        case SET_REPORT_GROUP_SALES_DATA: \r\n                return {...state, groupSales:actions.payload};\r\n        case SET_DATE_FROM: \r\n                return {...state, from:actions.payload};\r\n        case SET_DATE_TO: \r\n                return {...state, to:actions.payload};\r\n        default:return state;\r\n    }\r\n\r\n}","import {reducerCash} from './reducer-cash';\r\nimport {reducerBackoffice} from './reducer-backoffice';\r\nimport {reducerReport} from './reducer-report';\r\nimport {createStore, applyMiddleware, combineReducers} from \"redux\";\r\nimport thunk from 'redux-thunk';\r\n\r\nconst reducers = combineReducers({\r\n    cash : reducerCash,\r\n    backoffice : reducerBackoffice,\r\n    report : reducerReport\r\n});\r\n\r\nexport const store = createStore(reducers, applyMiddleware(thunk));\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {Provider} from \"react-redux\";\r\nimport {store} from './redux/store'\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Cash_wrapper__4hKGu\",\"infowrapper\":\"Cash_infowrapper__3Sr8A\",\"inputwrapper\":\"Cash_inputwrapper__2vcUu\",\"gridwrapper\":\"Cash_gridwrapper__30Ovg\",\"gridrowwrapper\":\"Cash_gridrowwrapper__3p87q\",\"header\":\"Cash_header__3FjJz\",\"headerwrapper\":\"Cash_headerwrapper__3Ep9B\",\"totalwrapper\":\"Cash_totalwrapper__2LIFw\",\"cancelwrapper\":\"Cash_cancelwrapper__2bUGH\",\"productinfo\":\"Cash_productinfo__-EFAM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"TableGrid_wrapper__1NRNu\",\"header\":\"TableGrid_header__31tYR\",\"headerItem\":\"TableGrid_headerItem__sgaOF\",\"headerBtn\":\"TableGrid_headerBtn__3QZQW\",\"body\":\"TableGrid_body__3iYUO\",\"bodyLine\":\"TableGrid_bodyLine__3EtDB\",\"bodyBtn\":\"TableGrid_bodyBtn__1phiV\",\"bodyItem\":\"TableGrid_bodyItem__2wdU-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Retail_wrapper__o36Jq\",\"mrgntop30px\":\"Retail_mrgntop30px__1muk4\",\"cursorPointer\":\"Retail_cursorPointer__1TVhA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapBackoffice\":\"Backoffice_wrapBackoffice__2eXYO\",\"wrapProducts\":\"Backoffice_wrapProducts__2MnIw\",\"wrapProductsControl\":\"Backoffice_wrapProductsControl__ghY5c\",\"add-product\":\"Backoffice_add-product__ciqV8\",\"wrapGroups\":\"Backoffice_wrapGroups__1KdNX\",\"wrapUnits\":\"Backoffice_wrapUnits__1veh_\",\"wrapCashes\":\"Backoffice_wrapCashes__1hC48\",\"wrapChecks\":\"Backoffice_wrapChecks__1m2oY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalBackground\":\"ProductDetail_modalBackground__rBMA_\",\"modal\":\"ProductDetail_modal__2mdtm\",\"headerWrapper\":\"ProductDetail_headerWrapper___7hnB\",\"inputWrapper\":\"ProductDetail_inputWrapper__2nET7\",\"buttonWrapper\":\"ProductDetail_buttonWrapper__3TDD-\"};"],"sourceRoot":""}